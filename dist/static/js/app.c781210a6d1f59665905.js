webpackJsonp([2,0],[function(e,s,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=t(79),u=n(r),a=t(63),i=n(a),o=new ChatApi;new u.default({el:"#app",template:'<app :chat-api="chatApi" />',components:{App:i.default},data:function(){return{chatApi:o}}})},,,,,,,,,,,,,,function(e,s,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=t(24),u=n(r),a=t(64),i=n(a),o=t(65),c=n(o);s.default={name:"app",props:["chatApi"],created:function(){var e=this;this.chatApi.onAuth(function(s){s?(e.subscribe(),e.user=s,e.subscribed=!0):(e.unSubscribe(),e.user=null,e.messages=[],e.subscribed=!1)})},computed:{isSignedIn:function(){return this.chatApi.isSignedIn()}},methods:{subscribe:function(){this.subscribed||(this.subscribeToMessages(),this.subscribeToUsers())},unSubscribe:function(){this.subscribed&&(this.onMessage.unSubscribe(),this.onUserChanges.unSubscribe())},subscribeToMessages:function(){var e=this;this.onMessage=this.chatApi.onMessage(function(s){var t=s.val();e.messages.push(t)})},subscribeToUsers:function(){var e=this;this.onUserChanges=this.chatApi.onUserChanges(function(s){var t=s.val(),n=(0,u.default)({},e.users);n[t.userName]=t,e.users=n})},onSignIn:function(){this.chatApi.signIn()},onSignOut:function(){this.chatApi.signOut()},onSend:function(e){this.chatApi.post(this.user,e)}},data:function(){return{messages:[],users:{},user:null}},components:{Chat:i.default,Login:c.default}}},function(e,s,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=t(68),u=n(r),a=t(67),i=n(a),o=t(70),c=n(o);s.default={name:"Chat",updated:function(){document.querySelectorAll(".messages")[0].scrollTop=1e7},props:["onSignOut","onSend","messages","users"],components:{MessageList:u.default,MessageInput:i.default,UserList:c.default}}},function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={name:"Login",props:["onPress"]}},function(e,s,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=t(60),u=n(r);s.default={props:["message"],computed:{time:function e(){var e=new Date(this.message.timestamp);return e.getHours()+":"+(0,u.default)(e.getMinutes(),2,"0")}},name:"Message"}},function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={name:"MessageInput",props:["onSend"],methods:{onKeyDown:function(){this.message&&(this.onSend(this.message),this.message="")}},data:function(){return{message:""}}}},function(e,s,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=t(66),u=n(r);s.default={name:"MessageList",props:["messages"],components:{Message:u.default}}},function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={name:"User",props:["user"],computed:{status:function(){return this.user.lastOnline>Date.now()-6e4?"online":"offline"}}}},function(e,s,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=t(23),u=n(r),a=t(69),i=n(a);s.default={name:"UserList",props:["users"],computed:{userList:function(){var e=this;return(0,u.default)(this.users).map(function(s){return e.users[s]})}},components:{User:i.default}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,s){},function(e,s){},function(e,s){},function(e,s){},function(e,s){},function(e,s){},function(e,s){},function(e,s){},,,,function(e,s,t){t(54);var n=t(1)(t(14),t(73),null,null);e.exports=n.exports},function(e,s,t){t(57);var n=t(1)(t(15),t(76),"data-v-7735c564",null);e.exports=n.exports},function(e,s,t){t(58);var n=t(1)(t(16),t(77),"data-v-a9cf6ee6",null);e.exports=n.exports},function(e,s,t){t(52);var n=t(1)(t(17),t(71),"data-v-02b3472b",null);e.exports=n.exports},function(e,s,t){t(59);var n=t(1)(t(18),t(78),"data-v-b7d0f6e2",null);e.exports=n.exports},function(e,s,t){t(55);var n=t(1)(t(19),t(74),"data-v-536f492e",null);e.exports=n.exports},function(e,s,t){t(53);var n=t(1)(t(20),t(72),"data-v-11a6ac57",null);e.exports=n.exports},function(e,s,t){t(56);var n=t(1)(t(21),t(75),"data-v-75256ad6",null);e.exports=n.exports},function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("li",{staticClass:"message"},[t("span",[e._v(e._s(e.message.userName)+" "),t("small",[e._v(e._s(e.time))])]),e._v(" "),t("p",[e._v(e._s(e.message.message))])])},staticRenderFns:[]}},function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("li",{class:e.status},[e._v("\n  "+e._s(e.user.userName)+"\n")])},staticRenderFns:[]}},function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.user?t("chat",{attrs:{onSignOut:e.onSignOut,messages:e.messages,users:e.users,onSend:e.onSend}}):t("login",{attrs:{onPress:e.onSignIn}})},staticRenderFns:[]}},function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ul",{staticClass:"messages"},e._l(e.messages,function(e){return t("Message",{attrs:{message:e}})}))},staticRenderFns:[]}},function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ul",{staticClass:"users"},e._l(e.userList,function(e){return t("user",{attrs:{user:e}})}))},staticRenderFns:[]}},function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"chat"},[t("header",[t("h1",[e._v("#Sytac")]),e._v(" "),t("button",{on:{click:e.onSignOut}},[e._v("Sign out")])]),e._v(" "),t("main",[t("section",[t("MessageList",{attrs:{messages:e.messages}}),e._v(" "),t("MessageInput",{attrs:{onSend:e.onSend}})],1),e._v(" "),t("aside",[t("UserList",{attrs:{users:e.users}})],1)])])},staticRenderFns:[]}},function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login"},[t("h1",[e._v("Welcome to Sytac chat!")]),e._v(" "),t("h2",[e._v("Please log in")]),e._v(" "),t("button",{on:{click:e.onPress}},[e._v("Sign in")])])},staticRenderFns:[]}},function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{id:"message",placeholder:"Say hello!",type:"text"},domProps:{value:e.message},on:{keydown:function(s){return"button"in s||!e._k(s.keyCode,"enter",13,s.key)?void e.onKeyDown(s):null},input:function(s){s.target.composing||(e.message=s.target.value)}}})},staticRenderFns:[]}}]);
//# sourceMappingURL=app.c781210a6d1f59665905.js.map